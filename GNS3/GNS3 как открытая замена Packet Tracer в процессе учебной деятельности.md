# GNS3 как открытая замена Packet Tracer в процессе учебной деятельности

### [Главная][1]

## В статье будет рассматриваться версия использования GNS3 внутри виртуальной машины VMware Workstation 16, используется дистрибутив Ubuntu c LXQt

[Ссылка](https://github.com/pzhnv/gns3-install/releases/download/v0.1/gns3-install.sh) на установочный скрипт автора статьи.

```shell
curl -O

chmod +x ./gns3-install.sh

./gns3-install.sh.
```

Плюсы ***Cisco Packet Tracer***:

* интуитивно понятный интерфейс

* низкие требования к железу

* возможность пользоваться функциями перемотки времени

* режим симуляции, в котором можно наглядно посмотреть путь каждого пакета и также проверить его содержимое.

Минусы ***Cisco Packet Tracer***:

* поддержка только Cisco устройств

* баги с оборудованием на комплексных схемах, особенно при настройке STP у коммутаторов (часто приходится просто копировать схему, вставляя её рядом, и тогда она чудесным образом начинает работать)

* неполная командная среда, т.е. практически ничего, что не входит в рамки CCNA, на нём собрать не получится. Например, создание сценариев для автоматизации EEM недоступно, не все функции расширенных ACL доступны

* нет совместимости со старыми версиями. К примеру, версия 8.1.1 не совместима с 8.2.0, при этом я могу взять и открыть файл проекта на новой версии, нажать CTRL+C, зайти в старую версию и нажать CTRL+V, и тогда все заработает

* проприетарность. Файлы проекта представляют собой бинарный файл, соответственно, быстро отредактировать топологию или конфигурацию устройств через notepad не выйдет

* неудобные горячие клавиши, которые нельзя изменить, например, не работает копирование – вставка текста с помощью CTRL+C, V, приходится использовать комбинации CTRL+INSERT, SHIFT+INSERT

* в настоящее время в последних версиях нельзя войти в программу без блокировки соединения с интернетом, так как сайт Cisco из России в текущий момент не доступен.

Плюсы ***GNS3***:

* поддержка устройств любых вендоров, включая Cisco

* поддержка Docker контейнеров

* каждое устройство полностью эмулируется, что даёт возможность управлять им, как настоящим

* поддержка браузерного Web-клиента

* возможность коллективно работать над одним проектом в режиме реального времени

* возможность «выпустить» виртуальные устройства в реальную сеть.

Минусы ***GNS3***:

* ольшая нагрузка на процессор, так как по факту каждое устройство запускается на своей виртуальной машине

* довольно медленная эмуляция L2 коммутаторов Cisco, из-за особенности их архитектуры

* нет встроенных образов оборудования, но их можно скачать с сайта производителя, на что в клиенте есть ссылка на скачивание образа, если производитель её оставил

![pic1](https://habrastorage.org/r/w1560/getpro/habr/upload_files/702/506/1f0/7025061f0df1960dbe61bde4c6f047ea.png)

###### Пример для MikroTik CHR

* плохая поддержка Windows, но GNS3-VM почти полностью решает эту проблему.

![pic2](https://habrastorage.org/r/w1560/getpro/habr/upload_files/f83/55a/dbf/f8355adbf3be40a2e8ead7d8b661299b.png)

###### GNS3-VM

Сам из себя GNS3-VM представляет образ для гипервизора, который можно скачать с [официального сайта](https://gns3.com/software/download-vm), разработчики рекомендуют использовать VMware, так как там, по их словам, лучше реализована работа VM внутри другой VM, но есть также образы под Virtual Box и Hyper-V.

Если будете пробовать скачать клиент для Windows с официального сайта, нужна будет регистрация, но это обходится путём скачивания .exe файла напрямую с их [git репозитория разработчиков](https://github.com/GNS3/gns3-gui/releases).

### Приступим к практике

У нас в МЦК-КТИТС подготовка к экзамену проводится сначала в Packet Tracer – собирается часть схемы.

![pic3](https://habrastorage.org/r/w1560/getpro/habr/upload_files/994/4d3/081/9944d3081f7235be2b11c5973f3e4319.png)

###### Задание для экзамена

С Packet Tracer здесь возникает проблема – PVST в связке с EtherChannel работают плохо (через раз), но по заданию необходимо их настроить.

Для подготовки задания в GNS3 студентам понадобятся только образы маршрутизаторов, которые можно достать с сайта или напрямую с устройства Cisco, или где-то в интернете.

![pic4](https://habrastorage.org/r/w1560/getpro/habr/upload_files/7d5/710/f6a/7d5710f6a9df3d852a2dc33502743f90.png)

###### Схема в Packet Tracer

![pic5](https://habrastorage.org/r/w1560/getpro/habr/upload_files/354/f85/d8b/354f85d8b3b6964d740663b5558aa5d0.png)

###### Аналогичная схема в GNS3

Также стоит уточнить, что, если вы работаете внутри виртуальной машины, то вам необходимо включить в её настройках Intel VT-x или AMD-V виртуализацию, чтобы машины внутри GNS работали.

![pic6](https://habrastorage.org/r/w1560/getpro/habr/upload_files/0c3/b51/8e1/0c3b518e17a4272d15c8486627aa15fa.png)

А для поддержки L2 коммутаторов в настройках qemu (гипервизора внутри GNS) необходимо добавить флаг – machine pc-q35-4.2

![pic7](https://habrastorage.org/r/w1560/getpro/habr/upload_files/740/65d/5de/74065d5de6b813e61a28ac43aabe8a2e.png)

###### Добавление опции внутри настройки устройств

GNS также поддерживает создание VPCS.

VPCS (Virtual PC Simulator) – это аналог ПК из Packet Tracer, с его помощью можно создавать легковесные виртуальные ПК, поддерживающие протоколы DHCP, ICMP.

![pic8](https://habrastorage.org/r/w1560/getpro/habr/upload_files/2cc/c0e/075/2ccc0e07599b45b0b4bfab45497910b0.png)

###### Командная оболочка VPCS

Также у каждого элемента топологии в директории проекта присутствуют конфигурационные файлы, что даёт возможность настроить проект без его открытия.

![pic9](https://habrastorage.org/r/w1560/getpro/habr/upload_files/a02/6e9/644/a026e9644d3d79d8ce33cb931160a59e.png)

###### Файл для настройки VPCS

К консоли каждого устройства по умолчанию можно подключиться через терминал, с помощью протокола Telnet, можно сделать это, кликнув по устройству два раза.

В GUI GNS3 также пишется IP адрес и порт подключения, если хотите подключиться из уже открытого терминала.

![pic10](https://habrastorage.org/r/w1560/getpro/habr/upload_files/f3b/db4/cf3/f3bdb4cf3339a24f7ac941b8e3b06ade.png)

###### Все устройства, к которым можно подключиться

Сама настройка сетевых устройств никак не отличается от аналогичной в Packet Tracer.

![pic11](https://habrastorage.org/r/w1560/getpro/habr/upload_files/2b0/da3/c08/2b0da3c08744746701d225536b90a916.png)

###### Настройка устройств в GNS3

Следующее задание состоит в том, что с помощью стендов с гипервизором VMware ESXi студент подключается к заранее восстановленному из снапшота стенду, и начинает настраивать виртуальное оборудование. У студентов возникают сложности, так как не всегда хватает свободных стендов, и многие обязаны ждать пока стенд не освободится. А также собрать стенд с ESXi в домашних условиях в большинстве случаев не предоставляется возможным.

Конечно, можно собрать все в том же VMware Workstation на рабочих машинах в аудитории, но возникают проблемы с настройкой сетевой топологии (нет графической схемы), образами ОС маршрутизаторов, децентрализованности управления снапшотами. Кроме того, неаккуратный студент может затереть снапшот, лежащий в открытом виде, а настраивать заново или восстанавливать его из бекапа довольно долго.

Ряд этих проблем решает GNS3, с помощью которого студент сам может быстро накидать схему – и дома, и в аудитории. Для этого нужна лишь одна виртуальная машина с GNS3-VM и браузер или система под управлением Linux с GNS3-server и GNS3-gui.

![pic12](https://habrastorage.org/r/w1560/getpro/habr/upload_files/20c/96a/1a0/20c96a1a03ff742495dbdcb5ec175617.png)

###### Схема 2-ого задания (ОС устройств может меняться)

**Собственно задание**. Состоит оно из четырех частей:

1. Виртуальные машины и коммутация

2. Сетевая связность

3. Инфраструктурные службы

4. Инфраструктура веб-приложения.

Подобную схему в Packet Tracer собрать, очевидно, не выйдет. Попробуем собрать её в GNS3.

[Скачиваем](https://www.gns3.com/marketplace/appliances/) шаблоны нужных устройств.

Загружаем шаблон в GNS, скачиваем образ ОС.

![pic13](https://habrastorage.org/r/w1560/getpro/habr/upload_files/052/383/806/052383806ac3f091b0ed528a41f2980a.png)

###### Выбор образа для шаблона

![pic14](https://habrastorage.org/r/w1560/getpro/habr/upload_files/533/c20/2a2/533c202a2721e5d995df8037ac985ad4.png)

###### Настройки машины

Для поддержки графики необходимо выбрать VNC или SPICE в настройках консоли. Также должны быть установлены пакеты: virt-viewer для SPICE или gvncviewer для VNC.

![pic15](https://habrastorage.org/r/w1560/getpro/habr/upload_files/e53/64b/27a/e5364b27a802ad8208503ba4ce9c8108.png)

###### Windows Server 2012 R2 в virt-viewer через SPICE

Для упрощения мы можем запустить Web сервера (WEB-L и WEB-R) в docker контейнерах с nginx.

![pic16](https://habrastorage.org/r/w1560/getpro/habr/upload_files/cf2/a4e/97f/cf2a4e97fef58c34423e71fe5f2df824.png)

###### Вторая схема в GNS3

Особых проблем в установке и настройке не возникает. Если что-то происходит, у GNS [огромное сообщество](https://gns3.com/community/featured), и многие вопросы уже заданы на официальном форуме.

[Оригинал статьи](https://habr.com/ru/companies/digital_tatarstan/articles/728120/)

### [Главная][1]

[1]: /knowledge-base/